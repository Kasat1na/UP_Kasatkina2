# Учебная практика

## Описание проекта

Проект представляет собой приложение, использующее базу данных для учета товаров, заказов и пользователей, а также интерфейсы на Avalonia UI для взаимодействия с пользователем. В рамках разработки была создана база данных, реализован механизм авторизации и интерфейс для управления товарами и заказами.

## 1. База данных и импорт

В рамках учебной практики была создана база данных, содержащая следующие таблицы:
- **categories** (категории товаров)
- **manufacturers** (производители)
- **pick_up_points** (пункты самовывоза)
- **roles** (роли пользователей)
- **status** (статусы заказов)
- **suppliers** (поставщики)
- **units** (единицы измерения)
- **products** (товары)
- **users** (пользователи)
- **orders** (заказы)
- **orders_products** (товары в заказах)

Все таблицы имеют соответствующие ограничения целостности (первичные и внешние ключи, каскадные обновления/удаления, автоинкрементные идентификаторы). После создания структуры базы данных был выполнен импорт данных из Excel для заполнения справочных таблиц и добавления начального ассортимента товаров.

### ER Диаграмма

## 2. Avalonia UI

### 2.1. Верстка (XAML)

#### Файл: `Authorization.xaml`

Форма авторизации реализована с использованием Avalonia UI и адаптирована для центрирования на экране. Она включает:
- Заголовок (TextBlock): "Авторизация"
- Поля ввода логина и пароля (TextBox)
- CAPTCHA (появляется после нескольких неудачных попыток)
- Кнопки: "Войти" и "Войти как гость"

#### Файл: `Show.axaml`

Представляет пользовательский интерфейс для отображения списка товаров с возможностью фильтрации и сортировки. Включает:
- Панель поиска и фильтрации
- Список товаров с возможностью сортировки по цене
- Кнопки для добавления товара, просмотра заказов и редактирования

### 2.2. Функционал (C#)

#### Файл: `AuthorizationViewModel.cs`

Реализует логику авторизации с проверкой CAPTCHA и защитой от подбора пароля. Алгоритм включает:
- Проверку CAPTCHA
- Авторизацию пользователя на основе данных из базы
- Защиту от подбора пароля с блокировкой на 10 секунд после двух неудачных попыток

#### Файл: `ShowViewModel.cs`

Управляет логикой взаимодействия с пользователем, включая:
- Загрузку списка товаров из базы данных
- Реализацию поиска, фильтрации и сортировки
- Добавление товара в заказ и удаление товара

### 2.3. Заказы (XAML и ViewModel)

#### Файл: `OrderUser.xaml`

Представляет интерфейс для управления заказами, включая:
- Список товаров в заказе
- Кнопки для изменения количества товара и оформления заказа
- Выбор пункта самовывоза и оформление заказа

#### Файл: `OrderUserViewModel.cs`

Управляет данными заказа, включая:
- Пересчет стоимости и скидки
- Добавление и удаление товаров из заказа
- Сохранение заказа в базе данных

### 2.4. Тестирование

Для тестирования функционала библиотеки **WriteEraseLibrary** и добавления товаров в систему были разработаны тесты.

#### WriteEraseLibrary

Библиотека вычисляет список свободных временных интервалов для сотрудника с учетом занятых временных слотов. Тестирование охватывает такие случаи, как:
- Полностью занятый рабочий день
- Разные временные интервалы для консультаций
- Перекрывающиеся занятые промежутки

#### Тесты добавления товара

Для проверки корректности добавления товара в систему были написаны тесты, проверяющие:
- Успешное добавление товара
- Ошибки при отсутствии обязательных полей
- Проверку данных (например, отрицательной стоимости)

### Примеры тестов:

- **Test_NoFreeSlots**: Проверяет, что при полном занятии рабочего дня нет свободных слотов.
- **Test_FullDayBusyWithGapsSmallerThanConsultation**: Проверяет, что если промежутки между занятиями меньше минимальной длительности консультации, система не возвращает свободных слотов.
- **Test_NoBusyPeriods_ReturnsFullDaySlots**: Проверяет, что если рабочий день полностью свободен, система возвращает все возможные слоты.


## Установка

1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/username/repository.git
    ```

2. Установите все необходимые зависимости:
  

3. Запустите приложение:
 
